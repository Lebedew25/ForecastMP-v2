# ForecastMP-v2
–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Å–µ–ª–ª–µ—Ä–æ–≤ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ

## üöÄ –û –ø—Ä–æ–µ–∫—Ç–µ

StockPredictor ‚Äî —ç—Ç–æ –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π SaaS-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∞—Å–∞–º–∏, –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø—Ä–æ—Å–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫—É–ø–æ–∫ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö (Wildberries, Ozon).

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üìä –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∂ –∏ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏
- ü§ñ ML-–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–æ—Å–∞ –Ω–∞ –±–∞–∑–µ XGBoost
- üì¶ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞–∫—É–ø–∫–∞–º —Å —Ä–∞—Å—á—ë—Ç–æ–º runway –∏ stockout date
- üìà –£—Ç—Ä–µ–Ω–Ω–∏–π dashboard —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π —Ç–æ–≤–∞—Ä–æ–≤ (Order Today, Already Ordered, Attention Required)
- üè¢ Multi-tenancy –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∞–Ω–∏–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Django 4.2
- **Database**: PostgreSQL
- **Task Queue**: Celery + Redis
- **ML**: XGBoost, pandas, scikit-learn
- **API**: Django REST Framework

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.9+
- PostgreSQL 12+
- Redis 6+

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)
cd ForecastMP-v2

# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# Windows:
venv\Scripts\activate
# Linux/macOS:
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
psql -U postgres
CREATE DATABASE stockpredictor;
\q

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py makemigrations
python manage.py migrate

# –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python manage.py createsuperuser
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—É–∂–µ —Å–æ–∑–¥–∞–Ω):

```env
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

DB_NAME=stockpredictor
DB_USER=postgres
DB_PASSWORD=your_password
DB_HOST=localhost
DB_PORT=5432

REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

#### –ó–∞–ø—É—Å–∫ Django —Å–µ—Ä–≤–µ—Ä–∞
```bash
python manage.py runserver
```

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://127.0.0.1:8000/admin –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

#### –ó–∞–ø—É—Å–∫ Celery worker (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
celery -A stockpredictor worker -l info
```

#### –ó–∞–ø—É—Å–∫ Celery beat –¥–ª—è scheduled tasks (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
celery -A stockpredictor beat -l info
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ForecastMP-v2/
‚îú‚îÄ‚îÄ accounts/              # –ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∫–æ–º–ø–∞–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ models.py         # User, Company, Permission
‚îÇ   ‚îî‚îÄ‚îÄ admin.py
‚îú‚îÄ‚îÄ products/             # –ú–æ–¥—É–ª—å –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # Product, MarketplaceProduct, ProductAttributes
‚îÇ   ‚îî‚îÄ‚îÄ admin.py
‚îú‚îÄ‚îÄ sales/               # –ú–æ–¥—É–ª—å –ø—Ä–æ–¥–∞–∂
‚îÇ   ‚îú‚îÄ‚îÄ models.py       # SalesTransaction, DailySalesAggregate, SalesHistory
‚îÇ   ‚îî‚îÄ‚îÄ admin.py
‚îú‚îÄ‚îÄ integrations/        # –ú–æ–¥—É–ª—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ models.py       # MarketplaceCredential, SyncLog
‚îÇ   ‚îú‚îÄ‚îÄ clients.py      # WildberriesClient, OzonClient
‚îÇ   ‚îî‚îÄ‚îÄ tasks.py        # Celery –∑–∞–¥–∞—á–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ forecasting/         # –ú–æ–¥—É–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models.py       # Forecast, ForecastAccuracy
‚îÇ   ‚îú‚îÄ‚îÄ ml_engine.py    # ML pipeline –∏ XGBoost –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ tasks.py        # Celery –∑–∞–¥–∞—á–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ procurement/         # –ú–æ–¥—É–ª—å –∑–∞–∫—É–ø–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ models.py       # ProcurementRecommendation, PurchaseOrder
‚îÇ   ‚îú‚îÄ‚îÄ analyzer.py     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ tasks.py        # Celery –∑–∞–¥–∞—á–∏ –∞–Ω–∞–ª–∏–∑–∞
‚îú‚îÄ‚îÄ stockpredictor/      # –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å Django
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ celery.py
‚îÇ   ‚îî‚îÄ‚îÄ urls.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ manage.py
‚îî‚îÄ‚îÄ .env
```

## üîÑ –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π workflow:

1. **6:00 AM** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏
   - –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥–∞–∂ –∏ –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏–∑ Wildberries –∏ Ozon
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

2. **7:00 AM** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
   - Feature engineering (–ª–∞–≥–∏, —Å–∫–æ–ª—å–∑—è—â–∏–µ —Å—Ä–µ–¥–Ω–∏–µ, –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ —Ñ–∏—á–∏)
   - –û–±—É—á–µ–Ω–∏–µ/–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ XGBoost –º–æ–¥–µ–ª–µ–π
   - –†–∞—Å—á—ë—Ç –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –Ω–∞ 7-30 –¥–Ω–µ–π –≤–ø–µ—Ä—ë–¥

3. **7:30 AM** - –ê–Ω–∞–ª–∏–∑ –∑–∞–∫—É–ø–æ–∫
   - –†–∞—Å—á—ë—Ç inventory runway
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ stockout date
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ —Å–ø–∏—Å–∫–∞–º –¥–µ–π—Å—Ç–≤–∏–π
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –∑–∞–∫–∞–∑–∞–º

4. **8:00 AM+** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç dashboard
   - –í–∏–¥–∏—Ç —Å–ø–∏—Å–∫–∏ "Order Today", "Already Ordered", "Attention Required"
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ –∑–∞–∫—É–ø–∫–∞—Ö

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### Accounts
- **Company** - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è (tenant)
- **User** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å email-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- **Permission** - –≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### Products
- **Product** - –º–∞—Å—Ç–µ—Ä-–∑–∞–ø–∏—Å—å —Ç–æ–≤–∞—Ä–∞ —Å SKU
- **MarketplaceProduct** - –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã
- **ProductAttributes** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–∫—É–ø–æ–∫

### Sales
- **SalesTransaction** - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞
- **DailySalesAggregate** - –ø—Ä–µ–¥–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏
- **SalesHistory** - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –¥–ª—è ML
- **InventorySnapshot** - —Å–Ω–∏–º–∫–∏ –æ—Å—Ç–∞—Ç–∫–æ–≤

### Forecasting
- **Forecast** - –ø—Ä–æ–≥–Ω–æ–∑ —Å–ø—Ä–æ—Å–∞ –ø–æ –¥–Ω—è–º
- **ForecastAccuracy** - –º–µ—Ç—Ä–∏–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π

### Procurement
- **ProcurementRecommendation** - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞–∫—É–ø–∫–∞–º
- **PurchaseOrder** - –∑–∞–∫–∞–∑—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
- **PurchaseOrderItem** - –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤

## üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
pytest
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
```bash
black .
flake8 .
```

### –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
```bash
python manage.py makemigrations
python manage.py migrate
```

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –°–æ–∑–¥–∞—Ç—å Celery tasks –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å views –∏ API endpoints
- [ ] –°–æ–∑–¥–∞—Ç—å dashboard UI
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## üë• –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
