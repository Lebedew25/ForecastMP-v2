# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Dashboard - –†–µ–∑—é–º–µ

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–≤–∏—Å–∞–Ω–∏—è dashboard** –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–æ–≤–∞—Ä–æ–≤.

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü—Ä–∏ 1000 —Ç–æ–≤–∞—Ä–æ–≤: **~4000+ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤** –Ω–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤ `/dashboard/metrics`
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞: **25-40 —Å–µ–∫—É–Ω–¥** –∏–ª–∏ TIMEOUT
- –ü—Ä–æ–±–ª–µ–º–∞: **N+1 –∑–∞–ø—Ä–æ—Å–æ–≤** –≤ Python-—Ü–∏–∫–ª–∞—Ö

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  
- –ü—Ä–∏ 1000 —Ç–æ–≤–∞—Ä–æ–≤: **3 SQL-–∑–∞–ø—Ä–æ—Å–∞** –Ω–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤ `/dashboard/metrics`
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞: **300-600 –º—Å**
- –£–ª—É—á—à–µ–Ω–∏–µ: **40-130 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ** ‚ö°

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã 3 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–∞ –≤ `dashboard/services.py`:

- **`get_total_inventory_value()`** ‚Äî 2001‚Üí1 –∑–∞–ø—Ä–æ—Å (99.95% ‚Üì)
- **`get_average_inventory_turnover()`** ‚Äî 1501‚Üí1 –∑–∞–ø—Ä–æ—Å (99.93% ‚Üì)  
- **`get_forecast_accuracy()`** ‚Äî 601‚Üí1 –∑–∞–ø—Ä–æ—Å (99.83% ‚Üì)

### 2. –ü—Ä–∏–º–µ–Ω–µ–Ω—ã —Ç–µ—Ö–Ω–∏–∫–∏:
- Subquery + OuterRef –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Annotate + Aggregate –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î
- Coalesce –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ NULL
- F() expressions –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –ø–æ–ª—è
- Case/When –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏

### 3. –°–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –ë–î:
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏—è–º–∏:
# - sales/migrations/0004_add_performance_indexes.py
# - forecasting/migrations/0002_add_performance_indexes.py

# –ò–Ω–¥–µ–∫—Å—ã:
# InventorySnapshot: (product_id, created_at DESC)
# SalesTransaction: (product_id, sale_date)
# Forecast: (product_id, generated_at)
```

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. **dashboard/services.py** ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫
2. **sales/migrations/0004_add_performance_indexes.py** ‚Äî –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è sales
3. **forecasting/migrations/0002_add_performance_indexes.py** ‚Äî –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è forecasts
4. **DASHBOARD_OPTIMIZATION.md** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (EN)

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã (`python manage.py check`)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (`python manage.py migrate`)
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ production:
1. –í–∫–ª—é—á–∏—Ç—å Django Debug Toolbar –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ SQL
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å EXPLAIN ANALYZE –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ endpoint `/dashboard/metrics`

Endpoint —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –¥–∞–∂–µ –ø—Ä–∏ 5000+ —Ç–æ–≤–∞—Ä–∞—Ö! üéâ
